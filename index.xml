<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Linux</title>
    <link>http://linux.mingguilu.com/</link>
    <description>Recent content on Linux</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Mon, 27 Feb 2017 08:47:45 +0800</lastBuildDate>
    <atom:link href="http://linux.mingguilu.com/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Ubuntu磁盘空间不足:卷boot仅剩余xxMB的磁盘空间</title>
      <link>http://linux.mingguilu.com/2017/02/27/ubuntu%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E4%B8%8D%E8%B6%B3%E5%8D%B7boot%E4%BB%85%E5%89%A9%E4%BD%99xxmb%E7%9A%84%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4</link>
      <pubDate>Mon, 27 Feb 2017 08:47:45 +0800</pubDate>
      
      <guid>http://linux.mingguilu.com/2017/02/27/ubuntu%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E4%B8%8D%E8%B6%B3%E5%8D%B7boot%E4%BB%85%E5%89%A9%E4%BD%99xxmb%E7%9A%84%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4</guid>
      <description>

&lt;p&gt;最近启动Ubuntu16.04进入桌面之后，总弹出&amp;rdquo;磁盘空间不足:卷boot仅剩余5.1MB的硬盘空间&amp;rdquo;的提示&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170227_01_00_01.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;点击&amp;rdquo;分析&amp;hellip;&amp;ldquo;之后提示&amp;rdquo;无法扫描&amp;rdquo;/boot&amp;rdquo;所包含的某些文件夹　Error opening directory &amp;lsquo;/boot/lost+found&amp;rsquo;:权限不够&amp;rdquo;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170227_01_00_02.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;安装Ubuntu16.04系统时，分配给boot分区200MB的磁盘空间，升级系统之后，之前的内核版本依然会存在boot分区中，造成分区的空间不足。需要删除旧的Linux内核版本，保留当前使用的版本即可。&lt;/p&gt;

&lt;h4 id=&#34;1-查看已存在的linux-image版本:13cdc48018125c721d0ba97d2c9dfa24&#34;&gt;1.  查看已存在的Linux-image版本&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;$ sudo dpkg --get-selections |grep linux-image  
linux-image-4.4.0-21-generic            install  
linux-image-4.4.0-59-generic            install  
linux-image-4.4.0-62-generic            install  
linux-image-4.4.0-64-generic            install  
linux-image-extra-4.4.0-21-generic      install  
linux-image-extra-4.4.0-59-generic      install  
linux-image-extra-4.4.0-62-generic      install  
linux-image-extra-4.4.0-64-generic      install  
linux-image-generic             install     
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;2-查看当前正在使用的linux内核版本:13cdc48018125c721d0ba97d2c9dfa24&#34;&gt;2. 查看当前正在使用的Linux内核版本&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;$ uname -r  
4.4.0-62-generic
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;或&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ cat /proc/version  
Linux version 4.4.0-62-generic (buildd@lcy01-30) (gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.4) ) #83-Ubuntu SMP Wed Jan 18 14:10:15 UTC 2017
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;3-卸载其它不用的内核版本:13cdc48018125c721d0ba97d2c9dfa24&#34;&gt;3. 卸载其它不用的内核版本&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;$ sudo apt purge linux-image-4.4.0-21-generic 　

$ sudo apt purge linux-image-4.4.0-59-generic 
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;4-再次查看剩余的版本:13cdc48018125c721d0ba97d2c9dfa24&#34;&gt;4. 再次查看剩余的版本&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;$ sudo dpkg --get-selections | grep linux-image  
linux-image-4.4.0-62-generic            install  
linux-image-4.4.0-64-generic            install  
linux-image-extra-4.4.0-62-generic      install  
linux-image-extra-4.4.0-64-generic      install  
linux-image-generic             install  
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;5-查看-boot分区的空间使用情况:13cdc48018125c721d0ba97d2c9dfa24&#34;&gt;5. 查看/boot分区的空间使用情况&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;$ df -lh | grep boot   
文件系统        1K-块     已用    可用   已用%  挂载点  
/dev/sda1      180M     104M   64M     62%　　/boot  
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;参考文档&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.linuxdiyf.com/linux/23774.html&#34;&gt;Ubuntu提示卷boot仅剩0字节的硬盘空间，解决办法&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>CentOS7使用YUM搭建Samba文件共享</title>
      <link>http://linux.mingguilu.com/2017/02/23/centos7%E4%BD%BF%E7%94%A8yum%E6%90%AD%E5%BB%BAsamba%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB</link>
      <pubDate>Thu, 23 Feb 2017 21:14:26 +0800</pubDate>
      
      <guid>http://linux.mingguilu.com/2017/02/23/centos7%E4%BD%BF%E7%94%A8yum%E6%90%AD%E5%BB%BAsamba%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB</guid>
      <description>

&lt;h3 id=&#34;1-关于samba:7f3b8ed4e97f874da5c624bfbeb106fd&#34;&gt;1. 关于Samba&lt;/h3&gt;

&lt;p&gt;Samba用于在Linux、UNIX和Windows之间提供安全、稳定、快速的文件和打印服务。&lt;/p&gt;

&lt;p&gt;Samba所需的软件包括：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Samba  服务器端软件包&lt;/li&gt;
&lt;li&gt;Samba-client  客户端软件包&lt;/li&gt;
&lt;li&gt;Samba-common  Samba公共文件软件包&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Samba有smbd和nmbd两个守护进程组成，两个进程的而启动脚本是独立的：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;smbd服务进程  为客户端提供文件共享和打印机服务，还负责用户权限验证以及锁功能，默认监听端口TCP协议的139和445&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;nmbd服务进程  提供NetBIOS名称服务，以满足基于Common Internet File System (CIFS)协议的共享访问，默认使用UDP协议的137端口&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;2-关闭防火墙和selinux:7f3b8ed4e97f874da5c624bfbeb106fd&#34;&gt;2. 关闭防火墙和SELinux&lt;/h3&gt;

&lt;p&gt;CentOS7防火墙与SELinux默认是开启状态，并拒绝远程用户对Samba的访问，需要暂时关闭。&lt;/p&gt;

&lt;p&gt;查看防火墙状态&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# systemctl status firewalld.service
● firewalld.service - firewalld - dynamic firewall daemon
   Loaded: loaded (/usr/lib/systemd/system/firewalld.service; enabled; vendor preset: enabled)
   Active: active (running) since 二 2016-10-18 00:23:15 CST; 38min ago
 Main PID: 843 (firewalld)
   CGroup: /system.slice/firewalld.service
           └─843 /usr/bin/python -Es /usr/sbin/firewalld --nofork --nopid

10月 18 00:23:15 localhost.localdomain systemd[1]: Started firewalld - dynamic firewall daemon.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;查看SELinux状态&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# getenforce
Enforcing
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;临时关闭SELinux&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# setenforce 0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;永久关闭SELinux&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# sed -i &amp;quot;/SELINUX=/c SELINUX=disable&amp;quot; /etc/sysconfig/selinux
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;临时关闭防火墙&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# systemctl stop firewalld.service
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;永久关闭防火墙&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# systemctl disable firewalld.service
Removed symlink /etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service.
Removed symlink /etc/systemd/system/basic.target.wants/firewalld.service.
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;3-配置samba服务器:7f3b8ed4e97f874da5c624bfbeb106fd&#34;&gt;3. 配置Samba服务器&lt;/h3&gt;

&lt;p&gt;安装Samba软件&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# yum install -y samba

# rpm -qa | grep samba
samba-common-4.4.4-12.el7_3.noarch
samba-client-libs-4.4.4-12.el7_3.x86_64
samba-common-tools-4.4.4-12.el7_3.x86_64
samba-4.4.4-12.el7_3.x86_64
samba-common-libs-4.4.4-12.el7_3.x86_64
samba-libs-4.4.4-12.el7_3.x86_64
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;启动smb和nmb服务&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# systemctl start smb.service
# systemctl start nmb.service
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;停止smb和nmb服务&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# systemctl stop smb.service
# systemctl stop nmb.service
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;重启smb和nmb服务&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# systemctl restart smb.service
# systemctl restart nmb.service
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;查看smb和nmb服务状态&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# systemctl status smb.service
# systemctl status nmb.service
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;设置smb和nmb服务器自启动&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# systemctl enable smb.service
# systemctl enable nmb.service
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;4-创建共享目录:7f3b8ed4e97f874da5c624bfbeb106fd&#34;&gt;4. 创建共享目录&lt;/h3&gt;

&lt;p&gt;假设目前有设计、开发、运维三个部门，各自创建一个部门共享目录供部门内部共享文件，和一个公共共享目录供部门间互相共享文件：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# mkdir -p /filesrv/{design,develop,ops,share/{design,develop,ops}}

# tree /filesrv/
/filesrv/
├── design
├── develop
├── ops
└── share
    ├── desing
    ├── develop
    └── ops
7 directories, 0 files
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;5-创建samba账户:7f3b8ed4e97f874da5c624bfbeb106fd&#34;&gt;5. 创建Samba账户&lt;/h3&gt;

&lt;p&gt;在使用useradd创建系统账户时使用参数 -s /sbin/nologin 指定账户无法登陆系统，提高账户安全性&lt;/p&gt;

&lt;p&gt;Smaba共享使用的账户就是服务器端操作系统中真实存在的系统账户，但必须使用smbpasswd命令添加为Samba账户并设置独立的密码，而不可以使用系统密码&lt;/p&gt;

&lt;p&gt;Samba默认将账户与密码文件存放在/var/lib/samba/private目录下&lt;/p&gt;

&lt;p&gt;假设每个部门创建2个Samba账户，并加入对应部门的组中：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# groupadd design
# useradd design1 -g design -s /sbin/nologin -M
# useradd design2 -g design -s /sbin/nologin -M
# smbpasswd -a design1
# smbpasswd -a design2

# groupadd develop
# useradd develop1 -g develop -s /sbin/nologin -M
# useradd develop2 -g develop -s /sbin/nologin -M
# smbpasswd -a develop1
# smbpasswd -a develop2

# groupadd ops
# useradd ops1 -g ops -s /sbin/nologin -M
# useradd ops2 -g ops -s /sbin/nologin -M
# smbpasswd -a ops1
# smbpasswd -a ops2
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;6-修改配置文件:7f3b8ed4e97f874da5c624bfbeb106fd&#34;&gt;6. 修改配置文件&lt;/h3&gt;

&lt;p&gt;Samba默认配置文件：/etc/samba/smb.conf&lt;/p&gt;

&lt;p&gt;好习惯说三遍：备份配置文件！备份配置文件！备份配置文件！&lt;/p&gt;

&lt;p&gt;配置文件解析：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[global]                                                                                    # 定义全局策略
    workgroup = SAMBA                                                               # 定义工作组                                  
    interfaces = lo 192.168.80.101/24                               # 指定samba监听哪些网络端口
    hosts allow = 127. 192.168.80. EXCEPT 192.168.80.250            # 指定有权访问Samba服务器资源的主机，与之相反的是hosts deny，使用EXCEPT可以指定例外的IP地址
    log_file = /var/log/samba/log.%m                            # 指定日志文件，每个访问主机会独立产生日志
    max log size = 50                                                       # 定义单个日志文件最大容量为50kb

    security = user                                                                 # 设置客户端访问Samba的方式
    # user表示使用用户名和密码验证身份
    # share表示匿名访问
    # server表示验证身份的访问，但账户信息保存在另一台smb服务器上
    # domain也表示验证身份的访问，但账户信息保存在活动目录中

    passdb backend = tdbsam                                           # 账户与密码的存储方式
    # smbpasswd表示老的明文格式存储账户及密码
    # tdbsam表示基于TDB的密文格式存储
    # ldapsam表示用LDAP存储账户资料

    guest account = nobody                                      # 设置匿名账户为nobody
    deadtime = 10# 连接回话自动关闭的期限，在大量并发访问环境中可提高服务器性能
    max connections = 0                                         # 设置最大连接数，0表示无限制

    printing = cups                                                                 # 设置打印工具为cups ?? http://yuanbin.blog.51cto.com/363003/115768/
    printcap name = cups                                        # ？？？
    load printers = yes                                                         # 是否共享打印机
    cups options = raw                                                          # 打印属性

[filesrv]                                                                                   # 共享名称
        comment = Home Directories                              # 共享描述信息
        path = /filesrv                                         # 共享路径
        browseable = no                                                 # 是否对所有人可见（yes|no）
        public = no                                                                     # 是否被所有人可读(yes|no)
        read only = No                                                              # 是否只读（yes|no）
        writeable = no                                                              # 是否可写（yes|no）
        write list =                                                                    # 可写用户或组列表
        create mask = 0744                                                      # 客户端上传文件的默认权限
        directory mask = 0755                                       # 客户端创建目录的默认权限
        valid users =                                                                   # 白名单
        invalid users =                                                             # 黑名单
        inherit acls = Yes                                                      # 继承访问控制列表（yes|no）
        guest ok = no                                                           # 是否允许匿名访问，仅当全局设置security=share时有效（yes|no）
        available = yes                                                             # 是否启用该共享(yes|no)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;假设每个Samba目录都对自己部门的共享目录可读可写，所有的Samba用户都对share目录可读可写&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# cat smb.conf

[global]
    workgroup = SAMBA
    security = user
    passdb backend = tdbsam
    printing = cups
    printcap name = cups
    load printers = yes
    cups options = raw

[homes]
    comment = Home Directories
    valid users = %S, %D%w%S
    browseable = No
    read only = No
    inherit acls = Yes
    available = no                              # 关闭用户家目录共享

[printers]
    comment = All Printers
    path = /var/tmp
    printable = Yes
    create mask = 0600
    browseable = No

[print$]
    comment = Printer Drivers
    path = /var/lib/samba/drivers
    write list = root
    create mask = 0664
    directory mask = 0775

[design]
    comment = design share
    path = /filesrv/design
    write list = @design                

[develop]
    comment = develop share
    path = /filesrv/develop
    write list = @develop

[ops]
    comment = ops share
    path = /filesrv/ops
    write list = @ops

[share]
    comment = public share
    path = /filesrv/share
    write list = @design @develop @ops
    create mask = 0775         # 创建文件的用户和所属组拥有可读写执行权限，其它用户可读可执行
    directory mask = 0775      # 创建目录的用户和所属组拥有可读写执行权限，其它用户可读可执行
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;7-修改共享目录权限:7f3b8ed4e97f874da5c624bfbeb106fd&#34;&gt;7. 修改共享目录权限&lt;/h3&gt;

&lt;p&gt;除了要在Samba主配置文件中定义权限外，还需要为系统目录设置正确的权限&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# chmod 1770 /filesrv/{design,develop,ops,share}
# chmod 1777 /filesrv/share -R
# chown :design /filesrv/design
# chown :develop /filesrv/develop
# chown :ops /filesrv/ops
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;8-重启samba服务:7f3b8ed4e97f874da5c624bfbeb106fd&#34;&gt;8. 重启Samba服务&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;# systemctl restart smb.service
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;9-访问samba共享:7f3b8ed4e97f874da5c624bfbeb106fd&#34;&gt;9. 访问Samba共享&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;Windows客户端访问:&lt;code&gt;\\Samba-server-ip&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170223_01_09_01.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;使用用户ops1验证，可见四个共享目录，但只有ops和share可访问&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170223_01_09_03.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;无权限访问design和develop目录&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170223_01_09_02.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Linux客户端访问&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;查看Samba主机上的共享信息&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# smbclient -L \\192.168.80.102
Enter root&#39;s password:          # 仅查看共享信息不需要密码，此处直接回车，以匿名用户查看
Anonymous login successful
Domain=[SAMBA] OS=[Windows 6.1] Server=[Samba 4.4.4]

    Sharename       Type      Comment
    ---------       ----      -------
    print$          Disk      Printer Drivers
    design          Disk      design share
    develop         Disk      develop share
    ops             Disk      ops share
    share           Disk      public share
    IPC$            IPC       IPC Service (Samba 4.4.4)
Anonymous login successful
Domain=[SAMBA] OS=[Windows 6.1] Server=[Samba 4.4.4]

    Server               Comment
    ---------            -------
    LOCALHOST            Samba 4.4.4

    Workgroup            Master
    ---------            -------
    SAMBA                LOCALHOST
    WORKGROUP            IMKINDU-PC
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;访问Samba共享目录&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# smbclient -U develop2 //192.168.80.102/develop
Enter develop2&#39;s password:
Domain=[SAMBA] OS=[Windows 6.1] Server=[Samba 4.4.4]
smb: \&amp;gt;
smb: \&amp;gt; ls
  .                                   D        0  Sat Feb 25 05:54:45 2017
  ..                                  D        0  Fri Feb 24 18:36:11 2017
  test                                D        0  Sat Feb 25 05:44:55 2017
  test1.txt                           N        0  Sat Feb 25 05:54:40 2017
  test2.md                            N        0  Sat Feb 25 05:54:40 2017
  test3                               D        0  Sat Feb 25 05:54:45 2017

        39294212 blocks of size 1024. 38295904 blocks available
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;h3 id=&#34;常见问题fqa:7f3b8ed4e97f874da5c624bfbeb106fd&#34;&gt;常见问题FQA&lt;/h3&gt;

&lt;h4 id=&#34;1-安装了samba-client-但使用-smbclient-命令时如下报错:7f3b8ed4e97f874da5c624bfbeb106fd&#34;&gt;1. 安装了samba-client，但使用&lt;code&gt;smbclient&lt;/code&gt;命令时如下报错：&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;# smbclient -L \\192.168.80.102
smbclient: relocation error: /lib64/libsamba-credentials.so.0: symbol GSS_KRB5_CRED_NO_CI_FLAGS_X, version gssapi_krb5_2_MIT not defined in file libgssapi_krb5.so.2 with link time reference       # 缺失samba软件
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;解决方法：安装samba软件&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# yum install -y samba
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;2-查看samba主机共享信息时-有报错:7f3b8ed4e97f874da5c624bfbeb106fd&#34;&gt;2. 查看Samba主机共享信息时，有报错：&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;# smbclient -L \\192.168.80.102
Enter root&#39;s password:
session setup failed: NT_STATUS_LOGON_FAILURE     # 登陆失败，一般为账户或密码错误
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;解决方法：仅查看共享信息不需要密码，此处直接回车，以匿名用户查看&lt;/p&gt;

&lt;h4 id=&#34;3-访问samba共享目录时-有报错:7f3b8ed4e97f874da5c624bfbeb106fd&#34;&gt;3. 访问Samba共享目录时，有报错&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;# smbclient -U develop2 //192.168.80.102
\\192.168.80.102: Not enough &#39;\&#39; characters in service    # 共享路径输入有误，一般使用//ip格式访问时会报错
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;解决：按照正确的格式输入共享路径 &lt;code&gt;//Samba-server-ip/share-name&lt;/code&gt;&lt;/p&gt;

&lt;h4 id=&#34;4-访问samba共享目录时-有报错:7f3b8ed4e97f874da5c624bfbeb106fd&#34;&gt;4. 访问Samba共享目录时，有报错：&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;# smbclient -U develop2 //192.168.80.102/filesrv
Enter develop2&#39;s password:
Domain=[SAMBA] OS=[Windows 6.1] Server=[Samba 4.4.4]
tree connect failed: NT_STATUS_BAD_NETWORK_NAME    # 输入性错误，一般为输入了错误的共享名称
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;解决方法：检查并修正共享名称，比如本案中虽然各部门共享目录存放在filesrv目录中，但Samba配置文件中并未将filesrv设置为共享目录&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# smbclient -U develop2 //192.168.80.102/develop
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;5-访问共享目录时-有报错:7f3b8ed4e97f874da5c624bfbeb106fd&#34;&gt;5. 访问共享目录时，有报错：&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;# smbclient -U develop2 //192.168.80.102/develop
Enter develop2&#39;s password:
Connection to 192.168.80.102 failed (Error NT_STATUS_HOST_UNREACHABLE)      # 无法连接Samba服务器，一般为网络故障或防火墙策略造成
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;解决方法：排除网络连接问题，调整防火墙策略，或关闭防火墙&lt;/p&gt;

&lt;h4 id=&#34;6-访问共享目录是-有报错:7f3b8ed4e97f874da5c624bfbeb106fd&#34;&gt;6. 访问共享目录是，有报错：&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;# smbclient -U develop2 //192.168.80.102/ops
Enter develop2&#39;s password:
Domain=[SAMBA] OS=[Windows 6.1] Server=[Samba 4.4.4]
smb: \&amp;gt;
smb: \&amp;gt; ls
NT_STATUS_ACCESS_DENIED listing \*     # 访问被拒绝，权限不足
smb: \&amp;gt; mkdir test
NT_STATUS_MEDIA_WRITE_PROTECTED making remote directory \test  # 写保护，权限不足
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;解决方法： 检查Samba目录的共享权限，或服务器文件系统的访问权限，是否不允许客户端或用户访问&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;参考文档&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;《Linux运维之道（第二版）》 - Samba文件共享 P176~189&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Ubuntu使用一键安装包安装禅道开源版</title>
      <link>http://linux.mingguilu.com/2017/02/18/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E5%8C%85%E5%AE%89%E8%A3%85%E7%A6%85%E9%81%93%E5%BC%80%E6%BA%90%E7%89%88</link>
      <pubDate>Sat, 18 Feb 2017 14:17:37 +0800</pubDate>
      
      <guid>http://linux.mingguilu.com/2017/02/18/ubuntu%E4%BD%BF%E7%94%A8%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E5%8C%85%E5%AE%89%E8%A3%85%E7%A6%85%E9%81%93%E5%BC%80%E6%BA%90%E7%89%88</guid>
      <description>

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;相比&lt;a href=&#34;http://linux.mingguilu.com/2017/02/16/ubuntu%E4%BD%BF%E7%94%A8apt%E6%90%AD%E5%BB%BAlamp/&#34;&gt;搭建LAMP环境&lt;/a&gt;&lt;a href=&#34;http://linux.mingguilu.com/2017/02/17/ubuntu%E4%BD%BF%E7%94%A8%E6%BA%90%E7%A0%81%E5%8C%85%E5%AE%89%E8%A3%85%E7%A6%85%E9%81%93%E5%BC%80%E6%BA%90%E7%89%88/&#34;&gt;使用源码包安装禅道&lt;/a&gt;，使用Linux一键安装包则简单很多&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;1-下载并安装-linux-64位一键安装包-http-www-zentao-net-download-80025-html:bc60e6351e871c8f3736c4ed6613e491&#34;&gt;1. 下载并安装&lt;a href=&#34;http://www.zentao.net/download/80025.html&#34;&gt;Linux 64位一键安装包&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;下载&lt;a href=&#34;http://dl.cnezsoft.com/zentao/9.0.1/ZenTaoPMS.9.0.1.zbox_64.tar.gz&#34;&gt;禅道9.0.1版本Linux 64位一键安装包&lt;/a&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ wget http://dl.cnezsoft.com/zentao/9.0.1/ZenTaoPMS.9.0.1.zbox_64.tar.gz
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;直接将安装包解压缩到/opt目录下，即安装完成&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo tar -zxvf ZenTaoPMS.9.0.1.zbox_64.tar.gz -C /opt/
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;2-使用zbox命令管理apache和ｍysql服务:bc60e6351e871c8f3736c4ed6613e491&#34;&gt;2. 使用zbox命令管理Apache和Ｍysql服务&lt;/h3&gt;

&lt;p&gt;获取zbox命令的帮助&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo /opt/zbox/zbox -h
Usage: zbox.php {start|stop|restart|status}

Options:
    -h --help Show help.
    -ap --aport Apache port, default 80　　# 修改Apache服务端口号
    -mp --mport Mysql port, default 3306　# 修改Mysql服务端口号
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;开启Apache和Ｍysql服务&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo /opt/zbox/zbox start 
Start Apache success
Start Mysql success
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;重启Apache和Ｍysql服务&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo /opt/zbox/zbox restart
Retart Apache success
Retart Mysql success
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;停止Apache和Ｍysql服务&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo /opt/zbox/zbox stop
Stop Apache success
Stop Mysql success
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;查看Apache和Ｍysql服务状态&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo /opt/zbox/zbox status
Apache is not running
Mysql is not running
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;开启Apache和Ｍysql服务后，在浏览器访问禅道管理系统&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;http://server-ip
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170218_01_02_01.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;进入“开源版”登录界面，默认帐号：admin，密码：123456&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170218_01_02_02.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;登录成功&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170218_01_02_03.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;3-访问数据库:bc60e6351e871c8f3736c4ed6613e491&#34;&gt;3. 访问数据库&lt;/h3&gt;

&lt;h4 id=&#34;网页登录数据库:bc60e6351e871c8f3736c4ed6613e491&#34;&gt;网页登录数据库&lt;/h4&gt;

&lt;p&gt;数据库管理用的是adminer，为了安全，访问adminer的时候需要身份验证，需要运行/opt/zbox/auth/adduser.sh来添加用户&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;在普通用户下&lt;/p&gt;

&lt;p&gt;$ sudo ./adduser.sh&lt;br /&gt;
This tool is used to add user to access adminer&lt;br /&gt;
Account: adminer1  passwd123!　　# 设置用户名和密码&lt;br /&gt;
./adduser.sh: 3: read: Illegal option -s&lt;br /&gt;
Adding password for user adminer1&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;在root用户下&lt;/p&gt;

&lt;p&gt;＃ cd /opt/zbox/auth/&lt;br /&gt;
＃ ./adduser.sh&lt;br /&gt;
This tool is used to add user to access adminer&lt;br /&gt;
Account: adminer2　　＃ 设置用户名&lt;br /&gt;
Password: 　　　　　＃ 设置密码(隐式)&lt;br /&gt;
Adding password for user adminer2&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;在访问禅道管理系统时，点击右下角的“数据库管理”&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170218_01_03_01.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;adminer身份验证&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170218_01_03_02.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;验证通过进入数据web管理台&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170218_01_03_03.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;命令行连接数据库:bc60e6351e871c8f3736c4ed6613e491&#34;&gt;命令行连接数据库&lt;/h4&gt;

&lt;p&gt;登录数据库，默认帐号:root，密码为空&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/opt/zbox/bin/mysql -u root -P mysql端口 -p 

$ /opt/zbox/bin/mysql -uroot -p　　# 使用默认的3306端口，可省略`-P`参数
Enter password: 　　　# 密码为空
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 58
Server version: 5.5.45 Source distribution

Copyright (c) 2000, 2015, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.

mysql&amp;gt; 
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&#34;常见问题fqa:bc60e6351e871c8f3736c4ed6613e491&#34;&gt;常见问题FQA&lt;/h3&gt;

&lt;h4 id=&#34;1-如果服务器上已经搭建了lamp环境-80端口和3306端口被占用了-无法启动:bc60e6351e871c8f3736c4ed6613e491&#34;&gt;1.  如果服务器上已经搭建了LAMP环境，80端口和3306端口被占用了，无法启动&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;$ sudo /opt/zbox/zbox start
(98)Address already in use: AH00073: make_sock: unable to listen for connections on address 0.0.0.0:80
no listening sockets available, shutting down
AH00015: Unable to open logs
Start Apache fail. You can see the log /opt/zbox/logs/apache_error.log
Start Mysql fail. You can see the log /opt/zbox/logs/mysql_error.log
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;解决方法：&lt;/p&gt;

&lt;p&gt;修改Apache端口&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo /opt/zbox/zbox -ap 8080
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;修改Mysql端口&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo /opt/zbox/zbox -mp 3308
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;在浏览器访问禅道管理系统时指定端口号&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;http://server-ip:8080
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;参考文档&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.zentao.net/book/zentaopmshelp/90.html&#34;&gt;linux用一键安装包&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Ubuntu使用源码包安装禅道开源版</title>
      <link>http://linux.mingguilu.com/2017/02/17/ubuntu%E4%BD%BF%E7%94%A8%E6%BA%90%E7%A0%81%E5%8C%85%E5%AE%89%E8%A3%85%E7%A6%85%E9%81%93%E5%BC%80%E6%BA%90%E7%89%88</link>
      <pubDate>Fri, 17 Feb 2017 22:48:12 +0800</pubDate>
      
      <guid>http://linux.mingguilu.com/2017/02/17/ubuntu%E4%BD%BF%E7%94%A8%E6%BA%90%E7%A0%81%E5%8C%85%E5%AE%89%E8%A3%85%E7%A6%85%E9%81%93%E5%BC%80%E6%BA%90%E7%89%88</guid>
      <description>

&lt;h3 id=&#34;1-搭建lamp环境:77831f7a9680d8377ea1d87039e03612&#34;&gt;1. 搭建LAMP环境&lt;/h3&gt;

&lt;p&gt;上一篇文档，已经&lt;a href=&#34;http://linux.mingguilu.com/2017/02/16/ubuntu%E4%BD%BF%E7%94%A8apt%E6%90%AD%E5%BB%BAlamp/&#34;&gt;在Ubuntu server 16.04 上使用apt搭建了LAMP环境&lt;/a&gt;，本文在此基础上使用源码包安装&lt;a href=&#34;http://www.zentao.net/download/80025.html&#34;&gt;禅道9.0.1开源版&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&#34;２-下载并解压-禅道源码包-http-dl-cnezsoft-com-zentao-9-0-1-zentaopms-9-0-1-zip:77831f7a9680d8377ea1d87039e03612&#34;&gt;２. 下载并解压&lt;a href=&#34;http://dl.cnezsoft.com/zentao/9.0.1/ZenTaoPMS.9.0.1.zip&#34;&gt;禅道源码包&lt;/a&gt;&lt;/h3&gt;

&lt;h4 id=&#34;安装zip-unzip软件:77831f7a9680d8377ea1d87039e03612&#34;&gt;安装zip、unzip软件&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;sudo apt install -y zip unzip
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;####　下载禅道9.0.1开源版源码包&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;wget http://dl.cnezsoft.com/zentao/9.0.1/ZenTaoPMS.9.0.1.zip
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;解压缩源码包:77831f7a9680d8377ea1d87039e03612&#34;&gt;解压缩源码包&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;unzip ZenTaoPMS.9.0.1.zip
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;将解压后的源码目录拷贝到apache网站根目录:77831f7a9680d8377ea1d87039e03612&#34;&gt;将解压后的源码目录拷贝到apache网站根目录&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;sudo cp -rvf zentaopms/ /var/www/html/

$ ls /var/www/html/zentaopms/
bin  config  db  doc  framework  lib  module  tmp  VERSION  www
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;３-安装禅道:77831f7a9680d8377ea1d87039e03612&#34;&gt;３. 安装禅道&lt;/h3&gt;

&lt;h4 id=&#34;在浏览器访问-http-server-ip-zentaopms-www-index-php-进入安装页面:77831f7a9680d8377ea1d87039e03612&#34;&gt;在浏览器访问 &lt;a href=&#34;http://server-ip/zentaopms/www/index.php，进入安装页面&#34;&gt;http://server-ip/zentaopms/www/index.php，进入安装页面&lt;/a&gt;&lt;/h4&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170217_01_03_01.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;点击-开始安装-阅读并同意授权协议:77831f7a9680d8377ea1d87039e03612&#34;&gt;点击“开始安装”，阅读并同意授权协议&lt;/h4&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170217_01_03_02.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;系统检查-两项未通过:77831f7a9680d8377ea1d87039e03612&#34;&gt;系统检查，两项未通过&lt;/h4&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170217_01_03_03.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;根据图提示修复临时文件目录和上传文件目录的权限:77831f7a9680d8377ea1d87039e03612&#34;&gt;根据图提示修复临时文件目录和上传文件目录的权限&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;chmod o=rwx -R /var/www/html/zentaopms/tmp/

chmod o=rwx -R /var/www/html/zentaopms/www/data
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;刷新系统检查-全部通过:77831f7a9680d8377ea1d87039e03612&#34;&gt;刷新系统检查，全部通过&lt;/h4&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170217_01_03_04.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;输入数据库root密码-生成配置文件:77831f7a9680d8377ea1d87039e03612&#34;&gt;输入数据库root密码，生成配置文件&lt;/h4&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170217_01_03_05.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;保存配置文件:77831f7a9680d8377ea1d87039e03612&#34;&gt;保存配置文件&lt;/h4&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170217_01_03_06.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;根据提示拷贝文本框中的配置内容，保存到&amp;rdquo; /var/www/html/zentaopms/config/my.php &amp;ldquo;中&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ sudo vim /var/www/html/zentaopms/config/my.php

$ cat /var/www/html/zentaopms/config/my.php
&amp;lt;?php
$config-&amp;gt;installed       = true;
$config-&amp;gt;debug           = false;
$config-&amp;gt;requestType     = &#39;GET&#39;;
$config-&amp;gt;db-&amp;gt;host        = &#39;127.0.0.1&#39;;
$config-&amp;gt;db-&amp;gt;port        = &#39;3306&#39;;
$config-&amp;gt;db-&amp;gt;name        = &#39;zentao&#39;;
$config-&amp;gt;db-&amp;gt;user        = &#39;root&#39;;
$config-&amp;gt;db-&amp;gt;password    = &#39;passwd123!&#39;;
$config-&amp;gt;db-&amp;gt;prefix      = &#39;zt_&#39;;
$config-&amp;gt;webRoot         = getWebRoot();
$config-&amp;gt;default-&amp;gt;lang   = &#39;zh-cn&#39;;
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;设置帐号:77831f7a9680d8377ea1d87039e03612&#34;&gt;设置帐号&lt;/h4&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170217_01_03_07.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;安装成功:77831f7a9680d8377ea1d87039e03612&#34;&gt;安装成功&lt;/h4&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170217_01_03_08.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;正式登录禅道管理系统之前-为了安全起见-必须删除install-php和upgrade-php:77831f7a9680d8377ea1d87039e03612&#34;&gt;正式登录禅道管理系统之前，为了安全起见，必须删除install.php和upgrade.php&lt;/h4&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170217_01_03_09.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ pwd
/var/www/html/zentaopms/www/

$ sudo rm -rvf install.php upgrade.php
已删除&#39;install.php&#39;
已删除&#39;upgrade.php&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;登录禅道管理系统:77831f7a9680d8377ea1d87039e03612&#34;&gt;登录禅道管理系统&lt;/h4&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170217_01_03_10.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;登录成功:77831f7a9680d8377ea1d87039e03612&#34;&gt;登录成功&lt;/h4&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170217_01_03_11.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h3 id=&#34;常见问题fqa:77831f7a9680d8377ea1d87039e03612&#34;&gt;常见问题FQA&lt;/h3&gt;

&lt;h4 id=&#34;１-在-生成配置文件-时-出现如下报错:77831f7a9680d8377ea1d87039e03612&#34;&gt;１.  在“生成配置文件”时，出现如下报错：&lt;/h4&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170217_01_FQA_01.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;解决方法：&lt;/p&gt;

&lt;p&gt;可能是由于禁止了MySql或ＭriaDB的root用户远程登录，需要允许root用户远程登录&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;改表法：更改“mysql”数据库里的“user”表里的“host”项，从“localhost”改为“%”，并刷新权限，让修改生效&lt;/p&gt;

&lt;p&gt;$ mysql -uroot -p&lt;/p&gt;

&lt;p&gt;MariaDB [(none)]&amp;gt; use mysql;&lt;br /&gt;
Reading table information for completion of table and column names&lt;br /&gt;
You can turn off this feature to get a quicker startup with -A&lt;br /&gt;
Database changed&lt;br /&gt;
&lt;br /&gt;
MariaDB [mysql]&amp;gt; select user,host from user;&lt;br /&gt;
+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;+&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;+&lt;br /&gt;
| user       | host      |&lt;br /&gt;
+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;+&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;+&lt;br /&gt;
| phpmyadmin | localhost |&lt;br /&gt;
| root       | localhost |&lt;br /&gt;
+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;+&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;+&lt;br /&gt;
2 rows in set (0.00 sec)&lt;br /&gt;
&lt;br /&gt;
MariaDB [mysql]&amp;gt; update user set host = &amp;lsquo;%&amp;rsquo; where user = &amp;lsquo;root&amp;rsquo; and host = &amp;lsquo;localhost&amp;rsquo;;&lt;br /&gt;
＃更改“mysql”数据库里的“user”表里的“host”项，从“localhost”改为“%”
　
Query OK, 1 row affected (0.00 sec)&lt;br /&gt;
Rows matched: 1  Changed: 1  Warnings: 0&lt;br /&gt;
&lt;br /&gt;
MariaDB [mysql]&amp;gt; flush privileges;      　
＃ 刷新权限，让修改生效&lt;br /&gt;
Query OK, 0 rows affected (0.00 sec)&lt;br /&gt;
&lt;br /&gt;
MariaDB [mysql]&amp;gt; select user,host from user;&lt;br /&gt;
+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;+&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;+&lt;br /&gt;
| user       | host      |&lt;br /&gt;
+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;+&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;+&lt;br /&gt;
| root       | %         |&lt;br /&gt;
| phpmyadmin | localhost |&lt;br /&gt;
+&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;+&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;+&lt;br /&gt;
2 rows in set (0.00 sec)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h4 id=&#34;2-保存配置文件-后-安装页面变成空白-无法设置帐号:77831f7a9680d8377ea1d87039e03612&#34;&gt;2.  “保存配置文件”后，安装页面变成空白，无法设置帐号&lt;/h4&gt;

&lt;p&gt;解决方法：&lt;/p&gt;

&lt;p&gt;可能是将配置内容保存到了/var/www/html/zentaopms/config/config.php，且保存时，没有去掉第一行&lt;code&gt;&amp;lt;?php&lt;/code&gt;，导致配置文件出错。注意查看config.php文件第一行，就是&lt;code&gt;&amp;lt;?php&lt;/code&gt;。&lt;/p&gt;

&lt;p&gt;默认情况下/var/www/html/zentaopms/config/my.php是不存在的，可以先&lt;code&gt;sudo touch my.php&lt;/code&gt;或直接&lt;code&gt;sudo vim my.php&lt;/code&gt;，再将配置内容保存进去。&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;参考文档&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://www.zentao.net/book/zentaopmshelp/101.html&#34;&gt;使用源码包安装(各系统通用)禅道&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Ubuntu使用apt搭建LAMP</title>
      <link>http://linux.mingguilu.com/2017/02/16/ubuntu%E4%BD%BF%E7%94%A8apt%E6%90%AD%E5%BB%BAlamp</link>
      <pubDate>Thu, 16 Feb 2017 09:52:59 +0800</pubDate>
      
      <guid>http://linux.mingguilu.com/2017/02/16/ubuntu%E4%BD%BF%E7%94%A8apt%E6%90%AD%E5%BB%BAlamp</guid>
      <description>

&lt;h3 id=&#34;１-web服务apache2:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;１. Web服务Apache2&lt;/h3&gt;

&lt;h4 id=&#34;安装apache2:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;安装Apache2&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;$ sudo apt install -y apache2
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;查看apache2版本:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;查看apache2版本&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;$ sudo apache2  -v
Server version: Apache/2.4.18 (Ubuntu)
Server built:   2016-07-14T12:32:26
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;启动apache2-service:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;启动apache2.service&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;$ sudo systemctl start apache2.service
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;停止apache2-service:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;停止apache2.service&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;$ sudo systemctl stop apache2.service
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;查看apache2-service状态:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;查看apache2.service状态&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;$ sudo systemctl status apache2.service
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;在浏览器测试访问:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;在浏览器测试访问&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;http://server-ip
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170216_01_01_01.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;2-数据库服务mariadb:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;2. 数据库服务MariaDB&lt;/h3&gt;

&lt;h4 id=&#34;安装mariadb:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;安装MariaDB&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;$ sudo apt install -y mariadb-server mariadb-client
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;设置mariadb-root用户密码:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;设置MariaDB root用户密码&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;$ sudo mysql_secure_installation

Enter current password for root (enter for none):
＃ 输入当前的root密码：没有就直接回车
Set root password? [Y/n] y
＃是否设置密码：是
New password:
＃设置密码
Re-enter new password:
＃再次确认密码
Remove anonymous users? [Y/n] y
＃ 是否移除匿名用户：是
Disallow root login remotely? [Y/n] y
＃ 禁止root用户远程登录：是
Remove test database and access to it? [Y/n] y
＃ 是否删除默认创建的test数据库，并清除所有对test数据的权限设置：是
Reload privilege tables now? [Y/n] y
＃ 是否重新加载权限表：是

All done!  If you&#39;ve completed all of the above steps, your MariaDB
installation should now be secure.

Thanks for using MariaDB!
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;测试登录mariadb:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;测试登录MariaDB&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;$ sudo mysql -uroot -p  或  $ sudo mysql -u root -p

Enter password:
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MariaDB connection id is 59
Server version: 10.0.29-MariaDB-0ubuntu0.16.04.1 Ubuntu 16.04

Copyright (c) 2000, 2016, Oracle, MariaDB Corporation Ab and others.

Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.

MariaDB [(none)]&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;启动mariadb:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;启动MariaDB&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;$ sudo systemctl start mysql-service
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;停止mariadb:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;停止MariaDB&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;$ sudo systemctl stop mysql-service
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;查看mariadb:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;查看MariaDB&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;$ sudo systemctl status mysql.service
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;3-脚本语言php:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;3. 脚本语言PHP&lt;/h3&gt;

&lt;h4 id=&#34;安装php7:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;安装PHP7&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;$ sudo apt install -y php7.0 php7.0-mysql php7.0-curl php7.0-json php7.0-cgi libapache2-mod-php7.0
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;查看php版本:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;查看php版本&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;$ sudo php -v

PHP 7.0.13-0ubuntu0.16.04.1 (cli) ( NTS )
Copyright (c) 1997-2016 The PHP Group
Zend Engine v3.0.0, Copyright (c) 1998-2016 Zend Technologies
    with Zend OPcache v7.0.13-0ubuntu0.16.04.1, Copyright (c) 1999-2016, by Zend Technologies
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;创建php探针:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;创建php探针&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;$ sudo vim /var/www/html/test.php

$ sudo cat /var/www/html/test.php
&amp;lt;?php
    phpinfo();
?&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;在浏览器测试php探针文件:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;在浏览器测试php探针文件&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;http://server-ip/test.php
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170216_01_03_01.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;4-phpmyadmin:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;4. phpMyAdmin&lt;/h3&gt;

&lt;h4 id=&#34;安装phpmyadmin:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;安装phpMyAdmin&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;$ sudo apt install -y phpmyadmin
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;选择运行phpMyAdmin的web服务&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170216_01_04_01.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;确认配置phpMyAdmin管理的数据库&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170216_01_04_02.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;设置phpMyAdmin的密码&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170216_01_04_03.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;在浏览器测试访问phpmyadmin:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;在浏览器测试访问phpMyAdmin&lt;/h4&gt;

&lt;pre&gt;&lt;code&gt;http://server-ip/phpmyadmin
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170216_01_04_04.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h4 id=&#34;登录phpmyadmin:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;登录phpMyAdmin&lt;/h4&gt;

&lt;p&gt;用户名：phpmyadmin&lt;/p&gt;

&lt;p&gt;密码：（上面安装时设置的phpmyadmin的密码）&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170216_01_04_05.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;登录成功，进入phpMyAdmin的web界面&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170216_01_04_06.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h4 id=&#34;注意-如果使用root用户和密码登录phpmyadmin-则会报错:69138c1247bdb4999cb89f7ded85f8bd&#34;&gt;注意：如果使用root用户和密码登录phpMyAdmin,则会报错：&lt;/h4&gt;

&lt;p&gt;&lt;strong&gt;待解决&lt;/strong&gt;：为什么root无法登录？因为禁止了root用户远程登录数据库？该怎么处理？&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://linux.mingguilu.com/images/170216_01_04_07.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;至此，已成功在Ubuntu 16.04 LTS上搭建LAMP。&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;参考链接&lt;/em&gt;&lt;br /&gt;
&lt;a href=&#34;https://linux.cn/article-7463-1.html&#34;&gt;在 Ubuntu Server 16.04 LTS 上安装 LAMP&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>about</title>
      <link>http://linux.mingguilu.com/about/</link>
      <pubDate>Wed, 15 Feb 2017 16:21:10 +0800</pubDate>
      
      <guid>http://linux.mingguilu.com/about/</guid>
      <description>

&lt;blockquote&gt;
&lt;p&gt;前言&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;1-标题１:6083a88ee3411b0d17ce02d738f69d47&#34;&gt;1. 标题１&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;列表１&lt;/li&gt;
&lt;li&gt;列表２&lt;/li&gt;
&lt;li&gt;列表&amp;hellip;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;2-标题２:6083a88ee3411b0d17ce02d738f69d47&#34;&gt;2. 标题２&lt;/h3&gt;

&lt;h3 id=&#34;3-标题:6083a88ee3411b0d17ce02d738f69d47&#34;&gt;3. 标题&amp;hellip;&lt;/h3&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&#34;常见问题fqa:6083a88ee3411b0d17ce02d738f69d47&#34;&gt;常见问题FQA&lt;/h3&gt;

&lt;h4 id=&#34;1-标题１-1:6083a88ee3411b0d17ce02d738f69d47&#34;&gt;1. 标题１&lt;/h4&gt;

&lt;p&gt;解决方法：&lt;/p&gt;

&lt;h4 id=&#34;2-标题２-1:6083a88ee3411b0d17ce02d738f69d47&#34;&gt;2. 标题２&lt;/h4&gt;

&lt;p&gt;解决方法：&lt;/p&gt;

&lt;h4 id=&#34;3-标题-1:6083a88ee3411b0d17ce02d738f69d47&#34;&gt;3. 标题&amp;hellip;&lt;/h4&gt;

&lt;p&gt;解决方法：&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;em&gt;参考文档&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#&#34;&gt;参考文档1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#&#34;&gt;参考文档2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#&#34;&gt;参考文档&amp;hellip;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
  </channel>
</rss>